#!/bin/bash
while getopts "n:v:a:k:t:" opt; do
	case $opt in
		n) ;;
		v) ;;
		a) ARCH=$OPTARG ;;
		k) ;;
		t) ;;
	esac
done
echo $ARCH | grep 64 > /dev/null
if [ $? == 0 ]; then
	LIBDIR=/usr/lib64
else
	LIBDIR=/usr/lib
fi
cp -np lustre/utils/.libs/mount_osd_zfs.so $LIBDIR/lustre/mount_osd_zfs.so
if [ $? != 0 ]; then
	echo "lustre-osd-zfs RPM seems to be already installed"
	exit 1
fi
chown root:root $LIBDIR/lustre/mount_osd_zfs.so
chmod 755 $LIBDIR/lustre/mount_osd_zfs.so

