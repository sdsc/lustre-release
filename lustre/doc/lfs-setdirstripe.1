.TH lfs-dirstripe 1 "2014 June 8" Lustre "Create striped directory"
.SH NAME
lfs dirstripe_commands \- used to set/get striping pattern of a directory.
.SH SYNOPSIS
.B lfs setdirstripe|getdirstripe <--count|-c stripe_count>
\fB [--index|-i mdt_index] [--hash-type|-t hash_type]
\fB [--default_stripe|-D ] [-m mode] <dir>

.br
.SH DESCRIPTION
.TP
.B lfs setdirstripe [OPTIONS] <dir>
Create a striped directory with striping parten.
.TP
.B lfs setdirstripe -D [OPTIONS] <dir>
Set default striping parten of the directory.
.TP
.B lfs getdirstripe <dir>
Get striping pattern of the directory.
.PP
The "lfs setdirstripe" command is only executable by root unless
"mdt.*.enable_remote_dir_gid" is set via "lctl set_param" to be either a
non-zero GID to limit it to a single group (e.g. "operator" or "admin"),
or "-1" to allow any group to create remote directories.

The root of the file system is on MDT0000, and directories and files inherit the
MDT of their parent directory unless a different MDT is specified with this
command.

By default, only directories on MDT0000 can contain directories that are not on
the same MDT.  However, if "mdt.*.enable_remote_dir" is set non-zero on an MDT
then it will allow creating remote directories that have parents other than
MDT0000. This is restricted to avoid creating directory trees that have
intermediate path components on a series different MDTs and become unavailable
if any of the intermediate MDTs are offline.
.SH OPTIONS
.TP
.B \\--count
is the number of MDTs to stripe a directory over.
.TP
.B \\--mdt_index
is the MDT index (starting at 0) on which to start striping for this directory.
.TP
.B \\--hash_type
is the hash_type of the striped directory.
-t fnv_1a_64 FNV-1a hash algorithm(default);
-t all_char  sum of characters % MDT_COUNT. (not recommended)
.TP
.B \\--default_stripe
set the default stripping partern of the directory, i.e. all of the
sub-directories created under this directory will use the striping partern.
Currently, only default stripe_count is supported.
.m \\--mode
is the mode of the striped directory
.SH EXAMPLES
.TP
.B $ lfs setdirstripe -c 2 -i 1 -t all_char /mnt/lustre/dir1
This creates a directory striped on two MDTs, whose first stripe is
located on the MDT1, and whose hash type is all_char.
.SH BUGS
Can not delete default stripe once it is being set.
.SH AUTHOR
The lfs setdirstripe command is part of the Lustre filesystem.
.SH SEE ALSO
.BR lfs (1),
.BR lustre (7)
